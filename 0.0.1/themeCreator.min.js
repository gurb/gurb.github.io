function sleep(e){return new Promise(t=>setTimeout(t,e))}function eventListener(){const e=document.querySelector(".layers"),t=document.querySelector(".properties"),s=document.getElementById("add-layer"),i=document.getElementById("delete-layer"),n=document.getElementById("up-layer"),o=document.getElementById("down-layer"),l=document.querySelector(".exitButton"),r=document.getElementById("create-button"),d=new UI;e.addEventListener("click",function(e){e.preventDefault()}),t.addEventListener("submit",function(e){e.preventDefault(),d.submitProperties()}),s.addEventListener("click",function(e){e.preventDefault(),d.showAddProperties()}),i.addEventListener("click",function(e){e.preventDefault(),d.deleteSection()}),n.addEventListener("click",function(e){e.preventDefault(),d.upSection()}),o.addEventListener("click",function(e){e.preventDefault(),d.downSection()}),l.addEventListener("click",function(e){e.preventDefault(),d.closeProperties()}),r.addEventListener("click",function(e){e.preventDefault(),d.generateCode()})}function Section(e,t,s,i){this.idName=e,this.className=t,this.max_widgets=s,this.show_add_element=i}function attrs(e){}function uniqueIDcontrol(e){if(0===sections.length)return!0;for(var t=0;t<sections.length;t++)if(sections[t].idName===e)return!1;return!0}function randomCharacter(e){for(var t="",s=["A","a","B","b","C","c","D","d","E","e","F","f","G","g","H","h","I","i","J","j","K","k","L","l","M","m","N","n","O","o","P","p","Q","q","R","r","S","s","T","t","U","u","V","v","W","w","X","x","Y","y","Z","z"],i=0;i<e;i++){var n=Math.floor(Math.random()*s.length);t+=s[n]}return t}function titlePattern(e){return"&lt;title&gt;"+e+"&lt;/title&gt;"}function cssPattern(){for(var e="."+arguments[0]+"{",t=1;t<arguments.length;t++)e+=arguments[t]+";";return e+"}"}function sectionPattern(e,t,s,i){return"&lt;div class='"+t+"'>&lt;b:section id='"+e+"' class='"+t+"' maxwidgets='"+s+"' showaddelement='"+i+"'/>&lt;/div&gt;"}class UI{constructor(){this.controller=document.querySelector(".controller"),this.panel=document.querySelector(".panel"),this.demoView=document.querySelector(".demo-view"),this.codeBox=document.querySelector(".codeBox"),this.codeBox.style.display="none",this.rightside=document.querySelector(".rightside"),this.layersList=document.querySelector(".layers-list"),this.layersControl=document.querySelector(".layers-control"),this.properties=document.querySelector(".properties"),this.properties.style.display="none",this.propertiesNotification=document.querySelector(".properties-notification"),this.sectionId=document.getElementById("sectionId"),this.sectionClass=document.getElementById("sectionClass"),this.maxWidgetNumber=document.getElementById("maxWidgetNumber"),this.selectBox=document.getElementById("select_box"),this.sectionOption=document.querySelector(".sectionOption"),this.line=document.createElement("hr"),this.temp_msg,this.securityCode=randomCharacter(10),this.canvas=document.getElementById("preview"),this.context=this.canvas.getContext("2d"),this.image=new Image}submitProperties(){const e=this.sectionId.value,t=this.sectionClass.value,s=this.maxWidgetNumber.value,i=this.selectBox.options[this.selectBox.selectedIndex].value,n=this;var o;if(""===e||e<0)o="Actually, section id is necessary.";else if(""===t||t<0)o="Actually, section class is necessary.";else if(""===s||s<0)o="Don't Necessary";else if("0"===i)o="Yes or No, choose one.";else if(uniqueIDcontrol(e)){o="All added.";var l=new Section(e,t,s,i);sections.push(l),this.addSection(n,sections),this.addOption(n,sections)}else o="ID must be unique";this.addNotification(n,o)}showAddProperties(){this.properties.style.display="block"}addNotification(e,t){var s=document.createElement("div");s.className="showNotification",0!==e.propertiesNotification.children.length&&this.temp_msg===t||e.propertiesNotification.appendChild(s),s.innerHTML=t,this.temp_msg=t,setTimeout(function(){s.remove("showNotification")},1e4)}showSectionProperties(e,t,s){var i,n=t,o=document.getElementById(n),l=document.getElementById(s);if("block"===o.style.display)o.style.display="none",l.style.backgroundImage="url(images/open-arrow.png)",l.style.opacity=.5;else for(var r=0;r<sections.length;r++){var d=sections[r].idName+this.securityCode+"-option",a=sections[r].idName+this.securityCode+"-icon";t==d?(l.style.backgroundImage="url(images/close-arrow.png)",l.style.opacity=1,o.style.display="block",i=r):(document.getElementById(d).style.display="none",document.getElementById(a).style.backgroundImage="url(images/open-arrow.png)",document.getElementById(a).style.opacity=.5)}this.layersList.options[i].selected="selected"}addSection(e,t){var s=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),o=document.createElement("span");s.className="sectionArea",n.className="sectionHeader",o.className="iconImage",i.className="sectionOption",s.id=t[t.length-1].idName+this.securityCode,i.id=t[t.length-1].idName+this.securityCode+"-option",o.id=t[t.length-1].idName+this.securityCode+"-icon";var l=t[t.length-1].idName+this.securityCode+"-option",r=o.id;i.style.display="none",n.addEventListener("click",function(){e.showSectionProperties(e,l,r)}),e.codeBox.style.display="none",e.demoView.appendChild(s),s.appendChild(n),n.appendChild(o),o.innerHTML+=t[t.length-1].idName,s.appendChild(i),this.addOptionFormSection(e,i)}addOptionFormSection(e,t){var s=document.createElement("form");s.setAttribute("class","formOptions"),s.setAttribute("method","post");var i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("placeholder","Width");var n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("placeholder","Height");var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("placeholder","Font Size");var l=document.createElement("input");l.setAttribute("type","color"),l.setAttribute("class","bgColorPicker"),l.setAttribute("name","Color Picker"),l.setAttribute("placeholder","Background Color");var r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("class","bgColorPickerText"),r.setAttribute("placeholder","Color code"),r.value=l.value;var d=document.createElement("input");d.setAttribute("type","submit"),d.setAttribute("value","Add");var a=document.createElement("div");a.className="formGroup";var c=document.createElement("div");c.className="formGroup";var u=document.createElement("div");u.className="rightInput";var m=document.createElement("div");m.className="rightInput";var h=document.createElement("div");h.className="leftInput";var p=document.createElement("div");p.className="leftInput",t.appendChild(s),s.appendChild(a).appendChild(h).appendChild(i),a.appendChild(u).appendChild(n),s.appendChild(c).appendChild(p).appendChild(r),p.appendChild(l),s.appendChild(d),e.setOptionFormValues(e,s,i,n,r),e.changeColor(e,l,r)}setOptionFormValues(e,t,s,i,n){t.addEventListener("submit",function(t){t.preventDefault();var o=s.value,l=i.value,r=n.value;e.drawOptionFormValues(e,o,l,r)})}drawOptionFormValues(e,t,s,i){var n=e.context;n.font="12px Roboto",n.color="#ffffff",n.clearRect(0,0,e.canvas.width,e.canvas.height),console.log(i),n.fillStyle=i,n.fillRect(20,10,260,20),n.fillStyle="#ffffff",n.fillText("layer",25,20)}changeColor(e,t,s){t.addEventListener("change",function(e){e.preventDefault(),s.value=t.value})}addOption(e,t){var s=document.createElement("option");e.layersList.appendChild(s),s.innerHTML=t[t.length-1].idName}deleteSection(){sections.splice(this.layersList.selectedIndex,1);var e=this.layersList.options[this.layersList.selectedIndex].text+this.securityCode,t=document.getElementById(e);this.demoView.removeChild(t),this.layersList.remove(this.layersList.selectedIndex)}upSection(){var e=this.layersList.options[this.layersList.selectedIndex].text;this.layersList.options[this.layersList.selectedIndex].text=this.layersList.options[this.layersList.selectedIndex-1].text,this.layersList.options[this.layersList.selectedIndex-1].text=e;var t=sections[this.layersList.selectedIndex];sections[this.layersList.selectedIndex]=sections[this.layersList.selectedIndex-1],sections[this.layersList.selectedIndex-1]=t;var s=this.layersList.options[this.layersList.selectedIndex-1].text+this.securityCode,i=this.layersList.options[this.layersList.selectedIndex].text+this.securityCode,n=document.getElementById(s),o=document.getElementById(i),l=o.parentNode;l.insertBefore(n,o),this.layersList.options[this.layersList.selectedIndex-1].selected="selected"}downSection(){var e=this.layersList.options[this.layersList.selectedIndex].text;this.layersList.options[this.layersList.selectedIndex].text=this.layersList.options[this.layersList.selectedIndex+1].text,this.layersList.options[this.layersList.selectedIndex+1].text=e;var t=sections[this.layersList.selectedIndex];sections[this.layersList.selectedIndex]=sections[this.layersList.selectedIndex+1],sections[this.layersList.selectedIndex+1]=t;var s=this.layersList.options[this.layersList.selectedIndex+1].text+this.securityCode,i=this.layersList.options[this.layersList.selectedIndex].text+this.securityCode,n=document.getElementById(s),o=document.getElementById(i),l=o.parentNode;l.insertBefore(o,n),this.layersList.options[this.layersList.selectedIndex+1].selected="selected"}closeProperties(){this.properties.style.display="none"}generateCode(){const e=this;e.codeBox.style.display="block",e.codeBox.innerHTML=firstPattern.toString()+titlePattern("Blog")+cssFirstTag,e.codeBox.innerHTML+=cssEndTag+headEndTag+bodyFirstTag;for(var t=0;t<sections.length;t++)e.codeBox.innerHTML+=sectionPattern(sections[t].idName,sections[t].className,sections[t].max_widgets,sections[t].show_add_element);e.codeBox.innerHTML+=bodyEndTag+htmlEndTag}}document.addEventListener("DOMContentLoaded",function(){eventListener()});var sections=[],tabF="<div class='tab'>",tabE="</div>",XMLpattern="",firstPattern="&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset='utf-8'/&gt;",cssFirstTag="&lt;b:skin&gt;",cssEndTag="&lt;/b:skin&gt;",headEndTag="&lt;/head&gt;",bodyFirstTag="&lt;body&gt;",bodyEndTag="&lt;/body&gt;",htmlEndTag="&lt;/html&gt;";
