function sleep(e){return new Promise(t=>setTimeout(t,e))}function eventListener(){const e=document.querySelector(".layers"),t=document.querySelector(".properties"),s=document.getElementById("add-layer"),n=document.getElementById("delete-layer"),i=document.getElementById("up-layer"),o=document.getElementById("down-layer"),l=document.querySelector(".exitButton"),a=document.querySelector(".copyCode"),r=document.getElementById("create-button"),c=new UI;e.addEventListener("click",function(e){e.preventDefault()}),t.addEventListener("submit",function(e){e.preventDefault(),c.submitProperties()}),s.addEventListener("click",function(e){e.preventDefault(),c.showAddProperties()}),n.addEventListener("click",function(e){e.preventDefault(),c.deleteSection()}),i.addEventListener("click",function(e){e.preventDefault(),c.upSection()}),o.addEventListener("click",function(e){e.preventDefault(),c.downSection()}),l.addEventListener("click",function(e){e.preventDefault(),c.closeProperties()}),r.addEventListener("click",function(e){e.preventDefault(),c.controlTemplateSettings()}),a.addEventListener("click",function(e){e.preventDefault(),c.copyCode()})}function Section(e,t,s,n){this.idName=e,this.className=t,this.max_widgets=s,this.show_add_element=n}function CSSattr(e,t,s,n){this.selectorName=e,this.width=t,this.height=s,this.bgColor=n}function uniqueIDcontrol(e){if(0===sections.length)return!0;for(var t=0;t<sections.length;t++)if(sections[t].idName===e)return!1;return!0}function controlCSS(e){for(var t=0;t<cssStyles.length;t++)if(e.selectorName==cssStyles[t].selectorName)return cssStyles[t]=e,!1;return!0}function randomCharacter(e){for(var t="",s=["A","a","B","b","C","c","D","d","E","e","F","f","G","g","H","h","I","i","J","j","K","k","L","l","M","m","N","n","O","o","P","p","Q","q","R","r","S","s","T","t","U","u","V","v","W","w","X","x","Y","y","Z","z"],n=0;n<e;n++){var i=Math.floor(Math.random()*s.length);t+=s[i]}return t}function titlePattern(e){return"&lt;title&gt;"+e+"&lt;/title&gt;"}function cssPattern(e,t,s,n){return"."+e+"-area{width:"+t+";height:"+s+";background:"+n+";}"+newLine+tab}function sectionPattern(e,t,s,n){return newLine+tab+"&lt;div class='"+t+"-area'><br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&lt;b:section id='"+e+"' class='"+t+"' maxwidgets='"+s+"' showaddelement='"+n+"'/>"+newLine+tab+"&lt;/div&gt;"}class UI{constructor(){this.controller=document.querySelector(".controller"),this.panel=document.querySelector(".panel"),this.demoView=document.querySelector(".demo-view"),this.codeBox=document.querySelector(".codeBox"),this.codeBox.style.display="none",this.copyCodeButton=document.querySelector(".copyCode"),this.copyCodeButton.style.display="none",this.templateName=document.getElementById("templateName"),this.templateURL=document.getElementById("templateURL"),this.author=document.getElementById("author"),this.settingsNotification=document.querySelector(".settings-notification"),this.rightside=document.querySelector(".rightside"),this.layersList=document.querySelector(".layers-list"),this.layersControl=document.querySelector(".layers-control"),this.properties=document.querySelector(".properties"),this.propertiesNotification=document.querySelector(".properties-notification"),this.sectionId=document.getElementById("sectionId"),this.sectionClass=document.getElementById("sectionClass"),this.maxWidgetNumber=document.getElementById("maxWidgetNumber"),this.selectBox=document.getElementById("select_box"),this.sectionOption=document.querySelector(".sectionOption"),this.line=document.createElement("hr"),this.temp_msg,this.securityCode=randomCharacter(10),this.canvas=document.getElementById("preview"),this.context=this.canvas.getContext("2d"),this.image=new Image}submitProperties(){const e=this.sectionId.value,t=this.sectionClass.value,s=this.maxWidgetNumber.value,n=this.selectBox.options[this.selectBox.selectedIndex].value,i=this;var o;if(""===e||e<0)o="Actually, section id is necessary.";else if(""===t||t<0)o="Actually, section class is necessary.";else if(""===s||s<0)o="Don't Necessary";else if("0"===n)o="Yes or No, choose one.";else if(uniqueIDcontrol(e)){o="All added.";var l=new Section(e,t,s,n);sections.push(l),this.addSection(i,sections),this.addOption(i,sections)}else o="ID must be unique";this.addNotification(i,o,i.propertiesNotification)}showAddProperties(){this.properties.style.display="block"}copyCode(){if(document.selection){var e=document.body.createTextRange(),t=document.getElementById("codeB");e.moveToElementText(t),e.select(),document.execCommand("copy")}else if(window.getSelection){var s=window.getSelection();s.removeAllRanges();e=document.createRange();e.selectNode(document.getElementById("codeB")),s.addRange(e),document.execCommand("copy"),s.removeAllRanges()}}addNotification(e,t,s){var n=document.createElement("div");n.className="showNotification",0!==s.children.length&&this.temp_msg===t||s.appendChild(n),n.innerHTML=t,this.temp_msg=t,setTimeout(function(){n.remove("showNotification")},1e4)}showSectionProperties(e,t,s){var n,i=t,o=document.getElementById(i),l=document.getElementById(s);if("block"===o.style.display)o.style.display="none",l.style.backgroundImage="url(https://gurb.github.io/open-arrow.png)",l.style.opacity=.5;else for(var a=0;a<sections.length;a++){var r=sections[a].idName+this.securityCode+"-option",c=sections[a].idName+this.securityCode+"-icon";t==r?(l.style.backgroundImage="url(https://gurb.github.io/close-arrow.png)",l.style.opacity=1,o.style.display="block",n=a):(document.getElementById(r).style.display="none",document.getElementById(c).style.backgroundImage="url(https://gurb.github.io/open-arrow.png)",document.getElementById(c).style.opacity=.5)}this.layersList.options[n].selected="selected"}addSection(e,t){var s=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("span");s.className="sectionArea",i.className="sectionHeader",o.className="iconImage",n.className="sectionOption",s.id=t[t.length-1].idName+this.securityCode,n.id=t[t.length-1].idName+this.securityCode+"-option",o.id=t[t.length-1].idName+this.securityCode+"-icon";var l=t[t.length-1].idName+this.securityCode+"-option",a=o.id;n.style.display="none",i.addEventListener("click",function(){e.showSectionProperties(e,l,a)}),e.codeBox.style.display="none",e.copyCodeButton.style.display="none",e.demoView.appendChild(s),s.appendChild(i),i.appendChild(o),o.innerHTML+=t[t.length-1].idName,s.appendChild(n),this.addOptionFormSection(e,n,i)}addOptionFormSection(e,t,s){var n=document.createElement("form");n.setAttribute("class","formOptions"),n.setAttribute("method","post");var i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("placeholder","Width");var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("placeholder","Height");var l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("placeholder","Font Size");var a=document.createElement("input");a.setAttribute("type","color"),a.setAttribute("class","bgColorPicker"),a.setAttribute("name","Color Picker"),a.setAttribute("placeholder","Background Color");var r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("class","bgColorPickerText"),r.setAttribute("placeholder","Color code"),r.value=a.value;var c=document.createElement("input");c.setAttribute("type","submit"),c.setAttribute("value","Add Style");var d=document.createElement("div");d.className="formGroup";var m=document.createElement("div");m.className="formGroup";var u=document.createElement("div");u.className="rightInput";var p=document.createElement("div");p.className="rightInput";var h=document.createElement("div");h.className="leftInput";var y=document.createElement("div");y.className="leftInput",t.appendChild(n),n.appendChild(d).appendChild(h).appendChild(i),d.appendChild(u).appendChild(o),n.appendChild(m).appendChild(y).appendChild(r),y.appendChild(a),n.appendChild(c),e.setOptionFormValues(e,n,i,o,r,s),e.changeColor(e,a,r)}setOptionFormValues(e,t,s,n,i,o){t.addEventListener("submit",function(t){t.preventDefault();var l=s.value,a=n.value,r=i.value,c=new CSSattr(o.textContent,l,a,r);controlCSS(c)&&cssStyles.push(c),e.drawOptionFormValues(e,l,a,r)})}drawOptionFormValues(e,t,s,n){var i=e.context;i.font="12px Roboto",i.color="#ffffff",i.clearRect(0,0,e.canvas.width,e.canvas.height),console.log(n),i.fillStyle=n,i.fillRect(20,10,260,20),i.fillStyle="#ffffff",i.fillText("layer",25,20)}changeColor(e,t,s){t.addEventListener("change",function(e){e.preventDefault(),s.value=t.value})}addOption(e,t){var s=document.createElement("option");e.layersList.appendChild(s),s.innerHTML=t[t.length-1].idName}deleteSection(){sections.splice(this.layersList.selectedIndex,1);var e=this.layersList.options[this.layersList.selectedIndex].text+this.securityCode,t=document.getElementById(e);this.demoView.removeChild(t),this.layersList.remove(this.layersList.selectedIndex)}upSection(){var e=this.layersList.options[this.layersList.selectedIndex].text;this.layersList.options[this.layersList.selectedIndex].text=this.layersList.options[this.layersList.selectedIndex-1].text,this.layersList.options[this.layersList.selectedIndex-1].text=e;var t=sections[this.layersList.selectedIndex];sections[this.layersList.selectedIndex]=sections[this.layersList.selectedIndex-1],sections[this.layersList.selectedIndex-1]=t;var s=this.layersList.options[this.layersList.selectedIndex-1].text+this.securityCode,n=this.layersList.options[this.layersList.selectedIndex].text+this.securityCode,i=document.getElementById(s),o=document.getElementById(n),l=o.parentNode;l.insertBefore(i,o),this.layersList.options[this.layersList.selectedIndex-1].selected="selected"}downSection(){var e=this.layersList.options[this.layersList.selectedIndex].text;this.layersList.options[this.layersList.selectedIndex].text=this.layersList.options[this.layersList.selectedIndex+1].text,this.layersList.options[this.layersList.selectedIndex+1].text=e;var t=sections[this.layersList.selectedIndex];sections[this.layersList.selectedIndex]=sections[this.layersList.selectedIndex+1],sections[this.layersList.selectedIndex+1]=t;var s=this.layersList.options[this.layersList.selectedIndex+1].text+this.securityCode,n=this.layersList.options[this.layersList.selectedIndex].text+this.securityCode,i=document.getElementById(s),o=document.getElementById(n),l=o.parentNode;l.insertBefore(o,i),this.layersList.options[this.layersList.selectedIndex+1].selected="selected"}closeProperties(){this.properties.style.display="none"}generateCode(){const e="Template Name: "+this.templateName.value+newLine+tab,t="Template URL: "+this.templateURL.value+newLine+tab,s="Author: "+this.author.value,n=this;n.codeBox.style.display="block",n.copyCodeButton.style.display="block",n.codeBox.innerHTML=firstPattern.toString()+titlePattern("Blog")+cssFirstTag,n.codeBox.innerHTML+=commentFirst+e+t+s+commentLast;for(var i=0;i<cssStyles.length;i++)n.codeBox.innerHTML+=cssPattern(cssStyles[i].selectorName,cssStyles[i].width,cssStyles[i].height,cssStyles[i].bgColor);n.codeBox.innerHTML+=cssEndTag+headEndTag+bodyFirstTag;for(i=0;i<sections.length;i++)n.codeBox.innerHTML+=sectionPattern(sections[i].idName,sections[i].className,sections[i].max_widgets,sections[i].show_add_element);n.codeBox.innerHTML+=bodyEndTag+htmlEndTag}controlTemplateSettings(){const e=this.templateName.value,t=this.templateURL.value,s=this.author.value;var n;""===e?n="Give a name for template":""===t?n="Give a template URL":""==s?n="Specify template developer's name":(n="Created Successfully Template Code",this.generateCode()),this.addNotification(self,n,this.settingsNotification)}}document.addEventListener("DOMContentLoaded",function(){eventListener()});var sections=[],cssStyles=[],newLine="<br/>",tab="&emsp;&emsp;&emsp;&emsp;",XMLpattern="",firstPattern="&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&emsp;&emsp;&lt;head&gt;<br/>&emsp;&emsp;&emsp;&emsp;&lt;meta charset='utf-8'/&gt;"+newLine+tab,cssFirstTag=newLine+tab+"&lt;b:skin&gt;&lt;![CDATA["+newLine+newLine+tab,commentFirst="*/ ---------------------------------"+newLine+tab,commentLast=newLine+tab+"--------------------------------- */"+newLine+tab,cssEndTag=newLine+tab+"]]&gt;&lt;/b:skin&gt;<br/>&emsp;&emsp;",headEndTag="&lt;/head&gt;<br/>&emsp;&emsp;",bodyFirstTag="&lt;body&gt;"+newLine+tab,bodyEndTag="<br/>&emsp;&emsp;&lt;/body&gt;",htmlEndTag="<br/>&lt;/html&gt;";
